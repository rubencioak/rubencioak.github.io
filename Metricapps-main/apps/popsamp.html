<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Population vs Sample Regression</title>
    <link rel="stylesheet" href="../assets/css/app.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
    .tabs::before {
        content: "Population vs Sample Reg.";
        font-size: 1.2rem;
        font-weight: bold;
    }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-button active" data-tab="app">Application</button>
        <button class="tab-button" data-tab="how">How to Use</button>
    </div>

    <div class="tab-content" id="app">
        <div class="plot-container" >
            <div id="plot"></div>
            <div id="betaPlot"></div>
        </div>
        <div class="controlpanel" style="width:300px">
            <div class="slider-wrapper">
                <div class="slider-label">Sample size: </div>
                <div class="slider-container" >
                    <div class="value-bubble" id="sampleval"></div>
                    <input type="range" class="custom-slider" min="0" max="500" step="5" value="50" id="sampleSize">
                    <div class="subticks"></div>
                    <div class="ticks"></div>
                    <div class="tick-labels"></div>
                </div>
            </div>
            <br>
            <button id="animateButton">‚ñ∂ Animate</button>
        </div>
    </div>

    <div class="tab-content" id="how" style="display:none;">
        <div class="how-to">
            <h2>üìò How to Use the <em>Population vs Sample Regression</em> App</h2>
            <h4>üéØ Objective</h4>
            <p>This app helps you <strong>visually understand</strong> the difference between three concepts:</p>
                <ul>
                    <li>Data generating process (DGP)</li>
                    <li>Population regression line (PRL)</li>
                    <li>Sample regression line (SRL)</li>
                </ul>
            <h4>üìù What is shown?</h4>
            <p>The left-hand side graph shows a cloud of points generated by the next <strong>DGP</strong>:</p>
            <p>
                \[
                y_i = \beta_0 + \beta_1 x_i + \varepsilon_i, \quad \varepsilon_i \sim \mathcal{N}(0, \sigma^2)
                \]
            </p>
            <p>Where: $$\beta_0 = 3,\; \beta_1 = 2,\; and \; \sigma^2=4$$ Together with its <strong>PRL</strong> in white:</p>
            <p>
                \[
                \mathbb{E}\left[y_i|x_i\right] = 3 + 2x_i
                \]
            </p>
            <p>
                Sampled points are colored in <font color="red">red</font>, 
                with its corresponding <strong><font color="red">SPL</font></strong>:
            </p>
            <p>
                \[
                \widehat{y_i} = \widehat{\beta_0} + \widehat{\beta_1}x_i
                \]
            </p>
            <p>
                The right-hand side graph shows the beta estimators from the 
                sample of points in the left-hand side as a function of the sample size.
            </p>
            <h4>üß™ Step-by-Step</h4>
            <p>Try the following steps:
            <ol>
            <li><strong>Click the ‚ñ∂ Animate button </strong>:
                <ul>
                <li>Left: watch how is filled with red dots while the red line gest closer to the white line.</li>
                <li>Right: similarly, watch how the estimated beta in the sample gets closer to the true beta.</li>
                </ul>
            </li>
            <li><strong>Slider</strong>: Adjust the sample size to update both plots.</li>
            </ol>
            
            <h4>üí° Learning Goals</h4>
            <ul>
                <li>Differentiate between sample-based inference and population parameters.</li>
                <li>Get a sense on how the law of large numbers work.</li>
            </ul>

            <h4>üèÅ Chalenge</h4>
            <p>
                Why is the <strong>estimated beta</strong> not equal to the <strong>true beta</strong> 
                when we sample the whole population?
            </p>
            <button id="revealSolution" style="margin-top: 1rem; background-color: #FF6347; color: white; border: none; padding: 0.5rem 1rem; cursor: pointer; border-radius: 5px;">
                üìñ Show Solution
            </button>
            <div id="solutionText" style="display:none; margin-top: 1rem;">
                <p><strong>Solution:</strong></p>
                <ul>
                    <li>
                        <strong>In theory:</strong> there is <strong>not much differnece</strong> between the 
                        DGP and the population parameters, think of the DGP as the engine of a car and 
                        the population parameters as the specifications of this engine like rpm, horsepower, etc. and
                        we usually refer to them indistinctinly. 
                    </li>
                    <li>
                        <strong>In practice:</strong> you can think that 
                        the <strong>whole population data is a sample</strong> drawn by nature following its DGP. 
                        Because of this, the estimated beta when we take the whole population is not equal 
                        as the true beta.
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script src="../assets/js/popsamp.js"></script>
    <script src="../assets/js/tabs.js"></script>
    <script src="../assets/js/solbutton.js"></script>
    <script src="../assets/js/sliderbar.js"></script>
</body>
</html>
